{"ast":null,"code":"import _slicedToArray from \"/Users/vineetkaurbagga/Documents/WebDev_Workspace/stock-tracker/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/vineetkaurbagga/Documents/WebDev_Workspace/stock-tracker/src/StockApp.jsx\";\nimport React, { useState, useCallback, useEffect } from 'react';\nimport StockList from './StockList';\nimport { getStocks, refreshStocks } from './services';\nimport AddStock from './AddStock';\nconst REFRESH_TIME_IN_MS = 60000;\n\nfunction StockApp({\n  onLogout,\n  username,\n  errorMessage,\n  setErrorMessage\n}) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        stocks = _useState2[0],\n        setStocks = _useState2[1]; //const [errorMessage, setErrorMessage] = useState([]);\n\n\n  const relaodStocks = useCallback(() => {\n    getStocks().then(stocklist => {\n      setStocks(stocklist);\n    }).catch(function (err) {\n      setErrorMessage(err);\n    });\n  }, []);\n  const handleRefreshStocks = useCallback(() => {\n    refreshStocks().then(() => {\n      relaodStocks();\n    }).catch(function (err) {\n      setErrorMessage(err);\n    });\n  }, []);\n  useEffect(() => {\n    if (username) {\n      handleRefreshStocks();\n      const intervalId = setInterval(() => {\n        handleRefreshStocks();\n      }, REFRESH_TIME_IN_MS);\n      return function cleanup() {\n        clearInterval(intervalId);\n      };\n    }\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"top-bar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Logged in : \", username), React.createElement(\"button\", {\n    onClick: handleRefreshStocks,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Refresh\"), React.createElement(\"button\", {\n    onClick: onLogout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Logout\")), React.createElement(AddStock, {\n    username: username,\n    relaodStocks: relaodStocks,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(StockList, {\n    stocks: stocks,\n    relaodStocks: relaodStocks,\n    setErrorMessage: setErrorMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }));\n}\n\n;\nexport default StockApp;","map":{"version":3,"sources":["/Users/vineetkaurbagga/Documents/WebDev_Workspace/stock-tracker/src/StockApp.jsx"],"names":["React","useState","useCallback","useEffect","StockList","getStocks","refreshStocks","AddStock","REFRESH_TIME_IN_MS","StockApp","onLogout","username","errorMessage","setErrorMessage","stocks","setStocks","relaodStocks","then","stocklist","catch","err","handleRefreshStocks","intervalId","setInterval","cleanup","clearInterval"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,EAAuCC,SAAvC,QAAwD,OAAxD;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAAQC,SAAR,EAAmBC,aAAnB,QAAuC,YAAvC;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,MAAMC,kBAAkB,GAAG,KAA3B;;AAEA,SAASC,QAAT,CAAkB;AAACC,EAAAA,QAAD;AAAWC,EAAAA,QAAX;AAAqBC,EAAAA,YAArB;AAAmCC,EAAAA;AAAnC,CAAlB,EAAsE;AAAA,oBAEvCZ,QAAQ,CAAC,EAAD,CAF+B;AAAA;AAAA,QAE5Da,MAF4D;AAAA,QAEpDC,SAFoD,kBAGnE;;;AAEA,QAAMC,YAAY,GAAGd,WAAW,CAAC,MAAM;AACpCG,IAAAA,SAAS,GACRY,IADD,CACOC,SAAS,IAAI;AACjBH,MAAAA,SAAS,CAACG,SAAD,CAAT;AACF,KAHD,EAICC,KAJD,CAIO,UAASC,GAAT,EAAa;AACjBP,MAAAA,eAAe,CAACO,GAAD,CAAf;AACF,KAND;AAOF,GAR+B,EAQ9B,EAR8B,CAAhC;AAUA,QAAMC,mBAAmB,GAAGnB,WAAW,CAAC,MAAM;AAC3CI,IAAAA,aAAa,GACZW,IADD,CACO,MAAM;AACVD,MAAAA,YAAY;AACd,KAHD,EAICG,KAJD,CAIO,UAASC,GAAT,EAAa;AACjBP,MAAAA,eAAe,CAACO,GAAD,CAAf;AACF,KAND;AAOF,GARsC,EAQrC,EARqC,CAAvC;AAUAjB,EAAAA,SAAS,CAAC,MAAM;AACb,QAAGQ,QAAH,EAAY;AACTU,MAAAA,mBAAmB;AACzB,YAAMC,UAAU,GAAGC,WAAW,CAAE,MAAM;AACrCF,QAAAA,mBAAmB;AACnB,OAF6B,EAE3Bb,kBAF2B,CAA9B;AAGA,aAAO,SAASgB,OAAT,GAAmB;AACzBC,QAAAA,aAAa,CAACH,UAAD,CAAb;AACM,OAFP;AAGI;AACH,GAVQ,EAUP,EAVO,CAAT;AAYF,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAmBX,QAAnB,CADH,EAEG;AAAQ,IAAA,OAAO,EAAEU,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFH,EAGG;AAAQ,IAAA,OAAO,EAAEX,QAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHH,CADH,EAMG,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAEC,QAApB;AAA8B,IAAA,YAAY,EAAEK,YAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANH,EAOG,oBAAC,SAAD;AAAW,IAAA,MAAM,EAAEF,MAAnB;AAA2B,IAAA,YAAY,EAAEE,YAAzC;AAAuD,IAAA,eAAe,EAAEH,eAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPH,CADF;AAWA;;AAAA;AAED,eAAeJ,QAAf","sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport StockList from './StockList';\nimport {getStocks ,refreshStocks} from './services';\nimport AddStock from './AddStock'; \n\nconst REFRESH_TIME_IN_MS = 60000;\n\nfunction StockApp({onLogout, username, errorMessage, setErrorMessage}){\n\n   const [stocks, setStocks] = useState([]);\t\n   //const [errorMessage, setErrorMessage] = useState([]);\n    \n   const relaodStocks = useCallback(() => {\n      getStocks()\n      .then( stocklist => { \n         setStocks(stocklist);\n      })\n      .catch(function(err){\n         setErrorMessage(err);\n      });\n   },[]);\n\n   const handleRefreshStocks = useCallback(() => {\n      refreshStocks()\n      .then( () => { \n         relaodStocks();\n      })\n      .catch(function(err){\n         setErrorMessage(err);\n      });\n   },[]);\n\n   useEffect(() => {\n      if(username){\n         handleRefreshStocks();\n\t\t\tconst intervalId = setInterval( () => {\n\t\t\t\thandleRefreshStocks();\n\t\t\t}, REFRESH_TIME_IN_MS );\n\t\t\treturn function cleanup() {\n\t\t\t\tclearInterval(intervalId);\n         };      \n      }\n   },[]);\n\n\treturn (\n   <div>\n      <div className=\"top-bar\">\n         <span>Logged in : {username}</span>\n         <button onClick={handleRefreshStocks}>Refresh</button>\n         <button onClick={onLogout}>Logout</button>\n      </div>\n      <AddStock username={username} relaodStocks={relaodStocks}/>\n      <StockList stocks={stocks} relaodStocks={relaodStocks} setErrorMessage={setErrorMessage}/>\n   </div>\n\t);\n};\n\nexport default StockApp;"]},"metadata":{},"sourceType":"module"}