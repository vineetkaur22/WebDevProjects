(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],[,,,,function(e,t,n){e.exports=n(11)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(3),c=n.n(s),o=(n(9),n(1)),i=(n(10),function(e){var t=e.username;return fetch("/users",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:t})}).catch((function(e){return Promise.reject({err:"network-issue",details:e})})).then((function(e){return e.ok?Promise.resolve(e):Promise.reject({err:"server-error",details:e.statusCode})}))}),u=function(e){var t=e.user;return fetch("/login",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({user:t})}).catch((function(e){return Promise.reject({err:"network-issue",details:e})})).then((function(e){return e.ok?e.json():Promise.reject({err:"server-error",details:e.statusCode})}))},l=function(){return fetch("/logout",{method:"GET"}).catch((function(e){return Promise.reject({err:"network-issue",details:e})})).then((function(e){return e.ok?e.json():Promise.reject({err:"server-error",details:e.statusCode})}))},m=function(){return fetch("/users/",{method:"GET",credentials:"include"}).catch((function(e){return Promise.reject({err:"network-issue",details:e})})).then((function(e){return e.ok?e.json():Promise.reject({err:"server-error",details:e.statusCode})}))},d=function(e){return fetch("/messages/",{method:"GET",credentials:"include"}).catch((function(e){return Promise.reject({err:"network-issue",details:e})})).then((function(e){return e.ok?e.json():Promise.reject({err:"server-error",details:e.statusCode})}))},f=function(e){var t=e.message;return fetch("/messages/",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({message:t}),credentials:"include"}).catch((function(e){return Promise.reject({err:"network-issue",details:e})})).then((function(e){return e.ok?Promise.resolve(e):Promise.reject({err:"server-error",details:e.statusCode})}))};var h=function(e){var t=e.onLogin,n=Object(a.useState)(""),s=Object(o.a)(n,2),c=s[0],u=s[1],l=Object(a.useState)(""),m=Object(o.a)(l,2),d=m[0],f=m[1],h=Object(a.useState)(!0),g=Object(o.a)(h,2),v=g[0],E=g[1];return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-box"},r.a.createElement("h1",null,"Login :"),r.a.createElement("input",{type:"text",placeholder:"Enter username",value:c,onChange:function(e){return t=e.target.value,u(t),void E(""===t);var t}}),r.a.createElement("span",{id:"errorMessage"},d),r.a.createElement("button",{id:"submit-button",type:"submit",disabled:v,onClick:function(){""===c?f("Username cannot be empty"):(f(""),i({username:c}).then((function(e){t(c)})).catch((function(e){f(e.message)})))}},"Login")))};var g=function(e){var t=e.setErrorMessage,n=Object(a.useState)([]),s=Object(o.a)(n,2),c=s[0],i=s[1];Object(a.useEffect)((function(){m().then((function(e){i(e)})).catch((function(e){t(e.message)}))}),[]);var u=c.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",null,r.a.createElement("div",{className:"user-icon-content"},r.a.createElement("img",{className:"user-icon",alt:"user icon",src:e.image})),r.a.createElement("span",{className:"userlist-username"},e.sender),r.a.createElement("span",{className:"timestamp-sidebar"},e.timestamp)))}));return r.a.createElement("ul",{className:"users"},u)};var v=function(e){var t=e.messages;return r.a.createElement("ol",{className:"message-list"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:"message-cell"},r.a.createElement("div",{className:"chat-cell"},r.a.createElement("img",{className:"user-icon",alt:"user icon",src:e.image}),r.a.createElement("span",{className:"messagelist-username"},e.sender)),r.a.createElement("div",{className:"chat-cell-text {'__' + message.sender + '__'}"},r.a.createElement("span",null,e.text),r.a.createElement("br",null),r.a.createElement("span",{className:"timestamp"},e.timestamp)))})))};var E=function(e){var t=e.props,n=Object(a.useState)(""),s=Object(o.a)(n,2),c=s[0],i=s[1],u=Object(a.useState)(!0),l=Object(o.a)(u,2),m=l[0],d=l[1];return r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"to-send",name:"text",id:"message-text",value:c,placeholder:"Enter message to send",onChange:function(e){return t=e.target.value,i(t),void d(""===t);var t}}),r.a.createElement("button",{id:"send-button",type:"submit",disabled:m,onClick:function(){f({message:c}).then((function(e){i(""),t.refreshMessages()})).catch((function(e){t.setErrorMessage(e.message)}))}},"Send"))};var p=function(e){var t=e.onLogout,n=e.user,s=Object(a.useState)([]),c=Object(o.a)(s,2),i=c[0],u=c[1],l=Object(a.useState)([]),m=Object(o.a)(l,2),f=m[0],h=m[1],p=Object(a.useCallback)((function(){d().then((function(e){u(e)})).catch((function(e){h(e.message)}))}),[]);return Object(a.useEffect)((function(){if(n){p();var e=setInterval((function(){p()}),3e3);return function(){clearInterval(e)}}}),[p]),r.a.createElement("div",{id:"chat-app"},r.a.createElement("div",{className:"chat-topbar"},r.a.createElement("div",{id:"title"},r.a.createElement("h2",null,"Welcome to group chat")),r.a.createElement("button",{type:"submit",className:"topbar-button",onClick:p},"Refresh"),r.a.createElement("button",{type:"submit",className:"topbar-button",onClick:t},"Logout"),r.a.createElement("div",{className:"error-message"},f)),r.a.createElement("div",{className:"chat-content"},r.a.createElement("div",{id:"side-bar"},r.a.createElement(g,{setErrorMessage:h})),r.a.createElement("div",{id:"message-window"},r.a.createElement(v,{messages:i})),r.a.createElement("div",{id:"outgoing"},r.a.createElement(E,{props:{refreshMessages:p,setErrorMessage:h}}))))};var b=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1];return n&&""!=n?r.a.createElement("div",{className:"App"},r.a.createElement(p,{onLogout:function(){l().then((function(){s("")})).catch((function(e){console.warn("error in user Logout")}))},user:n})):r.a.createElement("div",{className:"App"},r.a.createElement(h,{onLogin:function(e){u({user:e}).then((function(t){s(e)})).catch((function(e){console.warn("error in user Login")}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[4,1,2]]]);
//# sourceMappingURL=main.22a4b525.chunk.js.map